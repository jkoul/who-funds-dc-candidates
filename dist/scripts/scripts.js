"use strict";angular.module("app",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngSanitize","ui.router"]).constant("assetPath",".").config(["$locationProvider",function(a){a.html5Mode(!0)}]),angular.module("app").config(["$stateProvider","$urlServiceProvider","$urlRouterProvider",function(a,b,c){c.when("","/"),a.state("main",{"abstract":!0,templateUrl:"views/main.html",controller:"MainCtrl",resolve:{mainData:["Race","Candidate","Campaign","$q",function(a,b,c,d){return d.all([a.get(),b.get(),c.get()])}]}}).state("main.home",{url:"/",templateUrl:"views/pages/home.html",controller:"HomeCtrl"}).state("main.races",{"abstract":!0,controller:"RacesCtrl"}).state("main.races.index",{url:"/races",templateUrl:"views/pages/races.html"}).state("main.campaigns",{"abstract":!0,controller:"CampaignsCtrl"}).state("main.campaigns.index",{url:"/campaigns",templateUrl:"views/pages/campaigns.html"})}]),angular.module("app").controller("MainCtrl",["$scope","mainData",function(a,b){a.main={races:b[0].data,candidates:b[1].data,campaigns:b[2].data}}]),angular.module("app").controller("HomeCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("app").controller("RacesCtrl",["$scope","$filter",function(a,b){a.campaigns=b("candidateName")(a.main.campaigns,a.main.candidates)}]),angular.module("app").controller("CampaignsCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("app").factory("Race",["$http","assetPath",function(a,b){return{get:function(){return a.get(b+"/api/race.json")}}}]),angular.module("app").factory("Campaign",["$http","assetPath",function(a,b){return{get:function(){return a.get(b+"/api/campaign.json")}}}]),angular.module("app").factory("Candidate",["$http","assetPath",function(a,b){return{get:function(){return a.get(b+"/api/candidate.json")}}}]),angular.module("app").factory("Contribution",["$http",function(a){var b="https://maps2.dcgis.dc.gov/dcgis/rest/services/DCGIS_DATA/Public_Service_WebMercator/MapServer/34/query",c=function(a){var b=[],c=Object.keys(a);if(c.length){angular.forEach(c,function(c){var d="string"==typeof a[c]?c+"='"+a[c]+"'":c+"="+a[c];b.push(d)});var d=b.join(" AND ");return d}return"1=1"};return{get:function(d){return a.get(b+"?where="+c(d)+"&outFields=*&f=json")}}}]),angular.module("app").filter("candidateName",["$filter",function(a){return function(b,c){var d=function(b){if(b.candidateId){var d=a("filter")(c,{id:b.candidateId},!0);return 1===d.length?d[0].name:"Unnamed Candidate"}return b.committeeName};return b&&b.length?(angular.forEach(b,function(a){return angular.extend(a,{candidateName:d(a)})}),b):void 0}}]),angular.module("app").directive("campaignDetail",["Contribution",function(a){return{restrict:"E",scope:!0,link:function(b){b.campaign&&b.campaign.id&&a.get({COMMITTEENAME:b.campaign.committeeName}).then(function(a){b.contribs=a.data.features})}}}]),angular.module("app").run(["$templateCache",function(a){a.put("views/main.html",'<div class="layout-container"> <!-- HEADER --> <div id="header" class="header" ng-include="\'views/regions/header.html\'"></div> <!-- DEFER TO STATE-BASED VIEWS --> <div id="main" class="main" ui-view></div> <!-- FOOTER --> <div id="footer" class="footer" ng-include="\'views/regions/footer.html\'"></div> </div>'),a.put("views/pages/campaigns.html","<p>This is the campaigns view.</p>"),a.put("views/pages/home.html",'<div class="container"> <p>This is the home view.</p> <div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/yeoman.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="weird-container"> <a class="cta-button" ui-sref="main.races.index"><span class="cta-text">View Current Races</span></a> <!-- <h4>HTML5 Boilerplate</h4>\n    <p>\n      HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites.\n    </p>\n\n    <h4>Angular</h4>\n    <p>\n      AngularJS is a toolset for building the framework most suited to your application development.\n    </p>\n\n    <h4>Karma</h4>\n    <p>Spectacular Test Runner for JavaScript.</p> --> </div> </div>'),a.put("views/pages/races.html",'<h2>List of Races</h2> <div class="races-list"> <div class="race" ng-repeat="race in main.races | filter:{electionYear:2018}"> <h3>{{race.raceId}} - {{race.raceTypeDetail}} - {{race.electionYear}}</h3> <ul class="race-candidates-list"> <li ng-repeat="campaign in campaigns | filter:{raceId:race.raceId}"> <div>{{campaign.candidateName}}</div> <campaign-detail> <div>Total Contributions: <span ng-if="contribs.length == 1000">&gt;</span>{{contribs.length}}</div> <!-- <ul>\n            <li ng-repeat="contrib in contribs">{{contrib.attributes.}}\n          </ul> --> </campaign-detail> <!-- TODO: convert to grid cards and add "campaign-detail" directive --> </li> </ul> </div> </div>'),a.put("views/regions/footer.html",'<div class="container"> <p><span class="glyphicon glyphicon-heart"></span> from the Yeoman team</p> </div>'),a.put("views/regions/header.html",'<div class="navbar navbar-default" role="navigation"> <div class="container"> <div class="navbar-header"> <a class="navbar-brand" href="/">Who Funds DC Candidates?</a> </div> <div class="collapse"> <ul class="nav navbar-nav"> <li class="active"><a ui-sref="main.home">Home</a></li> <li><a ui-sref="main.races.index">Races</a></li> <li><a ui-sref="main.campaigns.index">Campaigns</a></li> </ul> </div> </div> </div>')}]);